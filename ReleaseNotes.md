2010-5-9 rev:9b591826bd

Changed the getData function to output the result directly to StringBuffer and String. It can help to reduce the time and memory used.